
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.19">
    
    
      
        <title>Dialogue - Paper</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.7e37652d.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato:300,300i,400,400i,700,700i%7CJetBrains+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Lato";--md-code-font:"JetBrains Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#goal" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Paper" class="md-header__button md-logo" aria-label="Paper" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Paper
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Dialogue
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/richelbilderbeek/paper_critical_ai" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill="currentColor" d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
    
      
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../.." class="md-tabs__link">
        
  
  
    
  
  Home

      </a>
    </li>
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../paper/" class="md-tabs__link">
          
  
  
  Paper

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../" class="md-tabs__link">
          
  
  
  Appendix

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../CODE_OF_CONDUCT/" class="md-tabs__link">
          
  
  
  Misc

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


  

<nav class="md-nav md-nav--primary md-nav--lifted md-nav--integrated" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Paper" class="md-nav__button md-logo" aria-label="Paper" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    Paper
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/richelbilderbeek/paper_critical_ai" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill="currentColor" d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Paper
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Paper
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../paper/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Paper
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Appendix
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Appendix
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Dialogue
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../paper_discussion/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Paper discussion
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../pilot_study/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Pilot study
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Misc
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Misc
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../CODE_OF_CONDUCT/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Code of conduct
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../CONTRIBUTING/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Contributing
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../LICENSE/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    License
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  
    <a href="https://github.com/richelbilderbeek/paper_critical_ai/blob/main/docs/dialogue/dialogue.md" title="Edit this page" class="md-content__button md-icon" rel="edit">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10 20H6V4h7v5h5v3.1l2-2V8l-6-6H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h4zm10.2-7c.1 0 .3.1.4.2l1.3 1.3c.2.2.2.6 0 .8l-1 1-2.1-2.1 1-1c.1-.1.2-.2.4-.2m0 3.9L14.1 23H12v-2.1l6.1-6.1z"/></svg>
    </a>
  
  
    
      
    
    <a href="https://github.com/richelbilderbeek/paper_critical_ai/raw/main/docs/dialogue/dialogue.md" title="View source of this page" class="md-content__button md-icon">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 18c.56 0 1 .44 1 1s-.44 1-1 1-1-.44-1-1 .44-1 1-1m0-3c-2.73 0-5.06 1.66-6 4 .94 2.34 3.27 4 6 4s5.06-1.66 6-4c-.94-2.34-3.27-4-6-4m0 6.5a2.5 2.5 0 0 1-2.5-2.5 2.5 2.5 0 0 1 2.5-2.5 2.5 2.5 0 0 1 2.5 2.5 2.5 2.5 0 0 1-2.5 2.5M9.27 20H6V4h7v5h5v4.07c.7.08 1.36.25 2 .49V8l-6-6H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h4.5a8.2 8.2 0 0 1-1.23-2"/></svg>
    </a>
  


  <h1>Dialogue</h1>

<h2 id="goal">Goal<a class="headerlink" href="#goal" title="Anchor link to this section for reference">&para;</a></h2>
<p>In this document, the dialogue with the AI is described, including all
control questions. Of each question, the expected answer is calculated.</p>
<h2 id="overview">Overview<a class="headerlink" href="#overview" title="Anchor link to this section for reference">&para;</a></h2>
<p>The dialogue follows the skill levels of <code>[Spector &amp; Ma, 2019]</code> in
increasing order:</p>
<table>
<thead>
<tr class="header">
<th>Chapter</th>
<th>Ability</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>D1.1</td>
<td>Interpretation</td>
<td>Read the data</td>
</tr>
<tr class="even">
<td>D1.2</td>
<td>Explanation</td>
<td>Reproduce the data</td>
</tr>
<tr class="odd">
<td>D1.3</td>
<td>Reasoning</td>
<td>Reason about the data</td>
</tr>
<tr class="even">
<td>D1.4</td>
<td>Analysis</td>
<td>Work with the data</td>
</tr>
<tr class="odd">
<td>D1.5</td>
<td>Evaluation</td>
<td>Double-check progress</td>
</tr>
<tr class="even">
<td>D1.6</td>
<td>Synthesis</td>
<td>Combine data with research paper</td>
</tr>
<tr class="odd">
<td>D1.7</td>
<td>Reflection</td>
<td>Not applicable</td>
</tr>
<tr class="even">
<td>D2</td>
<td>Judgement</td>
<td>Ask Q1</td>
</tr>
<tr class="odd">
<td>D3.1</td>
<td>Analysis</td>
<td>Work with data</td>
</tr>
<tr class="even">
<td>D3.2</td>
<td>Evaluation</td>
<td>Double-check progress</td>
</tr>
<tr class="odd">
<td>D3.3</td>
<td>Synthesis</td>
<td>Combine data with alternative line of reasoning</td>
</tr>
<tr class="even">
<td>D3.4</td>
<td>Reflection</td>
<td>Not applicable</td>
</tr>
<tr class="odd">
<td>D4</td>
<td>Judgement</td>
<td>Ask Q2</td>
</tr>
</tbody>
</table>

<h2 id="expectations">Expectations<a class="headerlink" href="#expectations" title="Anchor link to this section for reference">&para;</a></h2>
<p>A paper does not typically hold code (unlike an R Markdown document as
this one) and commonly all the results of an analysis are copy-pasted
into a paper and then left unchecked.</p>
<p>To make it easy to compare the final paper with the constants we’ve
copy-pasted, here are all the constants:</p>
<div class="highlight"><pre><span></span><code>## Explain
first_fish_id &lt;- 181
first_origin &lt;- &quot;Lake&quot;
first_transplant &lt;- &quot;Lake&quot;
first_pre_mass &lt;- 1.00
first_fish_survived &lt;- 0
first_enclosure_id &lt;- &quot;L1&quot;

## Reasoning
origin_values &lt;- c(&quot;Lake&quot;, &quot;Stream&quot;)
transplanted_values &lt;- c(&quot;Lake&quot;, &quot;Stream&quot;, &quot;Control&quot;)
n_all_survived &lt;- 151
n_all_died &lt;- 89
n_all_ignored &lt;- 60
total_n_fish &lt;- 300
n_fish_control &lt;- 60
n_fish_transplanted &lt;- 240
lowest_pre_mass &lt;- 0.5
highest_pre_mass &lt;- 3.6
n_survived &lt;- 151
n_died &lt;- 89
n_enclosures &lt;- 80
n_enclosures_with_2_fish &lt;- 3
n_enclosures_with_3_fish &lt;- 74
n_enclosures_with_4_fish &lt;- 3
anomalous_enclosures &lt;- c(&quot;L20&quot;, &quot;L25&quot;, &quot;L6&quot;, &quot;L7&quot;, &quot;S22&quot;, &quot;S24&quot;)
cage_mass_mean_for_l1 &lt;- 1.256667
cage_mass_stdev_for_l1 &lt;- 0.4532475
cage_mass_mean_deviation_sd_for_l1 &lt;- c(1.1546303, -0.5662836, -0.5883466)

abs_cage_mass_mean_deviation_sd_for_l1 &lt;- abs(cage_mass_mean_deviation_sd_for_l1)
</code></pre></div>
<p>Here we check if our expectations are logically valid:</p>
<div class="highlight"><pre><span></span><code>library(testthat)

# Check consistency between these variables
expect_equal(
  total_n_fish,
  n_all_survived + n_all_died + n_all_ignored
)

expect_equal(
  total_n_fish,
  n_fish_control + n_fish_transplanted
)
expect_equal(
  n_fish_transplanted,
  n_survived + n_died
)
expect_equal(
  n_enclosures,
  n_enclosures_with_2_fish + n_enclosures_with_3_fish + n_enclosures_with_4_fish
)
expect_equal(
  length(anomalous_enclosures),
  n_enclosures_with_2_fish + n_enclosures_with_4_fish
)
</code></pre></div>
<p>All solutions to the dialog are written here, and tested below, during
the dialogue.</p>
<p>To test this, the file with the data needs to be present in the working
folder:</p>
<div class="highlight"><pre><span></span><code>dataset_filename &lt;- &quot;Bolnick_traits.txt&quot;
if (!file.exists(dataset_filename)) {
  stop(
    &quot;Dataset not found at path &#39;&quot;, dataset_filename, &quot;&#39; \n&quot;,
    &quot;Current working directory: &quot;, getwd(), &quot; \n&quot;
  )
}
</code></pre></div>
<h2 id="helper-functions">Helper functions<a class="headerlink" href="#helper-functions" title="Anchor link to this section for reference">&para;</a></h2>
<p>Here are some functions we need in the analysis:</p>
<div class="highlight"><pre><span></span><code>#&#39; Determines if a value is TRUE. Is FALSE for NA
is_true &lt;- function(x) { !is.na(x) &amp; x == TRUE  }
expect_true(is_true(TRUE))
expect_false(is_true(FALSE))
expect_false(is_true(NA))

#&#39; Determines if a value is FALSE. Is FALSE for NA
is_false &lt;- function(x) { !is.na(x) &amp; x == FALSE}
expect_true(is_false(FALSE))
expect_false(is_false(TRUE))
expect_false(is_false(NA))
</code></pre></div>
<h2 id="d1-teach-an-ai-about-the-data-and-line-of-reasoning-in-the-paper">D1. Teach an AI about the data and line of reasoning in the paper<a class="headerlink" href="#d1-teach-an-ai-about-the-data-and-line-of-reasoning-in-the-paper" title="Anchor link to this section for reference">&para;</a></h2>
<p>These subsections are numbered by the abilities taught to the AI</p>
<h3 id="d11-interpretation">D1.1: Interpretation<a class="headerlink" href="#d11-interpretation" title="Anchor link to this section for reference">&para;</a></h3>
<p>In these steps, we let the AI read the data.</p>
<h4 id="d111-read-data">D1.1.1: Read data<a class="headerlink" href="#d111-read-data" title="Anchor link to this section for reference">&para;</a></h4>
<ul>
<li>The dialogue starts by uploading the data for the paper at <a href="https://github.com/richelbilderbeek/Bolnick_and_Stutz_2017/blob/main/Bolnick_traits.txt">the
    notes from the literature
    club</a>.</li>
</ul>
<!-- -->

<div class="highlight"><pre><span></span><code>t_all &lt;- read.csv(&quot;Bolnick_traits.txt&quot;, sep = &quot; &quot;)
</code></pre></div>
<h4 id="d112-show-first-rows">D1.1.2: Show first rows<a class="headerlink" href="#d112-show-first-rows" title="Anchor link to this section for reference">&para;</a></h4>
<p>Ask the AI:</p>
<div class="highlight"><pre><span></span><code>Could you show the first rows of the data?
</code></pre></div>
<p>Expected:</p>
<div class="highlight"><pre><span></span><code>knitr::kable(head(t_all))
</code></pre></div>
<table>
<colgroup>
<col style="width: 7%" />
<col style="width: 5%" />
<col style="width: 5%" />
<col style="width: 8%" />
<col style="width: 8%" />
<col style="width: 7%" />
<col style="width: 7%" />
<col style="width: 8%" />
<col style="width: 8%" />
<col style="width: 9%" />
<col style="width: 2%" />
<col style="width: 2%" />
<col style="width: 2%" />
<col style="width: 3%" />
<col style="width: 3%" />
<col style="width: 3%" />
<col style="width: 7%" />
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">sampleID</th>
<th style="text-align: right;">fishID</th>
<th style="text-align: left;">origin</th>
<th style="text-align: left;">enclosure</th>
<th style="text-align: left;">transplant</th>
<th style="text-align: left;">date_in</th>
<th style="text-align: right;">pre_mass</th>
<th style="text-align: right;">pre_length</th>
<th style="text-align: right;">post_mass</th>
<th style="text-align: right;">post_length</th>
<th style="text-align: right;">pw</th>
<th style="text-align: right;">bd</th>
<th style="text-align: right;">gw</th>
<th style="text-align: right;">grn</th>
<th style="text-align: right;">grl</th>
<th style="text-align: left;">sex</th>
<th style="text-align: right;">survived</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">118</td>
<td style="text-align: right;">118</td>
<td style="text-align: left;">Stream</td>
<td style="text-align: left;">S2</td>
<td style="text-align: left;">Stream</td>
<td style="text-align: left;">06/03/11</td>
<td style="text-align: right;">1.75</td>
<td style="text-align: right;">4.9</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="even">
<td style="text-align: left;">12</td>
<td style="text-align: right;">12</td>
<td style="text-align: left;">Stream</td>
<td style="text-align: left;">L8</td>
<td style="text-align: left;">Lake</td>
<td style="text-align: left;">06/02/11</td>
<td style="text-align: right;">1.13</td>
<td style="text-align: right;">4.6</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="odd">
<td style="text-align: left;">122</td>
<td style="text-align: right;">122</td>
<td style="text-align: left;">Lake</td>
<td style="text-align: left;">S2</td>
<td style="text-align: left;">Stream</td>
<td style="text-align: left;">06/03/11</td>
<td style="text-align: right;">2.37</td>
<td style="text-align: right;">5.6</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="even">
<td style="text-align: left;">123</td>
<td style="text-align: right;">123</td>
<td style="text-align: left;">Lake</td>
<td style="text-align: left;">S3</td>
<td style="text-align: left;">Stream</td>
<td style="text-align: left;">06/03/11</td>
<td style="text-align: right;">1.71</td>
<td style="text-align: right;">5.2</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="odd">
<td style="text-align: left;">124</td>
<td style="text-align: right;">124</td>
<td style="text-align: left;">Lake</td>
<td style="text-align: left;">S4</td>
<td style="text-align: left;">Stream</td>
<td style="text-align: left;">06/03/11</td>
<td style="text-align: right;">2.45</td>
<td style="text-align: right;">5.4</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="even">
<td style="text-align: left;">127</td>
<td style="text-align: right;">127</td>
<td style="text-align: left;">Lake</td>
<td style="text-align: left;">S7</td>
<td style="text-align: left;">Stream</td>
<td style="text-align: left;">06/03/11</td>
<td style="text-align: right;">0.85</td>
<td style="text-align: right;">4.0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: right;">0</td>
</tr>
</tbody>
</table>

<p>We select only the relevant data here, so that the analysis can be
checked by humans more easily:</p>
<div class="highlight"><pre><span></span><code>t &lt;- t_all |&gt; 
  dplyr::select(
    fishID, 
    origin, 
    enclosure, 
    pre_mass, 
    transplant,  
    survived
  ) |&gt; dplyr::arrange(enclosure)
knitr::kable(head(t))
</code></pre></div>
<table>
<thead>
<tr class="header">
<th style="text-align: left;"></th>
<th style="text-align: right;">fishID</th>
<th style="text-align: left;">origin</th>
<th style="text-align: left;">enclosure</th>
<th style="text-align: right;">pre_mass</th>
<th style="text-align: left;">transplant</th>
<th style="text-align: right;">survived</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">27</td>
<td style="text-align: right;">181</td>
<td style="text-align: left;">Lake</td>
<td style="text-align: left;">L1</td>
<td style="text-align: right;">1.00</td>
<td style="text-align: left;">Lake</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="even">
<td style="text-align: left;">28</td>
<td style="text-align: right;">182</td>
<td style="text-align: left;">Lake</td>
<td style="text-align: left;">L1</td>
<td style="text-align: right;">0.99</td>
<td style="text-align: left;">Lake</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="odd">
<td style="text-align: left;">149</td>
<td style="text-align: right;">1</td>
<td style="text-align: left;">Stream</td>
<td style="text-align: left;">L1</td>
<td style="text-align: right;">1.78</td>
<td style="text-align: left;">Lake</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="even">
<td style="text-align: left;">16</td>
<td style="text-align: right;">16</td>
<td style="text-align: left;">Stream</td>
<td style="text-align: left;">L10</td>
<td style="text-align: right;">1.22</td>
<td style="text-align: left;">Lake</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="odd">
<td style="text-align: left;">36</td>
<td style="text-align: right;">193</td>
<td style="text-align: left;">Lake</td>
<td style="text-align: left;">L10</td>
<td style="text-align: right;">1.71</td>
<td style="text-align: left;">Lake</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="even">
<td style="text-align: left;">164</td>
<td style="text-align: right;">17</td>
<td style="text-align: left;">Stream</td>
<td style="text-align: left;">L10</td>
<td style="text-align: right;">2.06</td>
<td style="text-align: left;">Lake</td>
<td style="text-align: right;">1</td>
</tr>
</tbody>
</table>

<h3 id="d12-explanation">D1.2: Explanation<a class="headerlink" href="#d12-explanation" title="Anchor link to this section for reference">&para;</a></h3>
<p>In these steps, we let the AI demonstrate it has read the data.</p>
<h4 id="d121-explain-fishid">D1.2.1: Explain ‘fishID’<a class="headerlink" href="#d121-explain-fishid" title="Anchor link to this section for reference">&para;</a></h4>
<p>Ask the AI:</p>
<div class="highlight"><pre><span></span><code>The &#39;fishID&#39; column denotes the ID of a fish.
Each fish has a unique ID.
Could you give me the ID of the first fish in the dataset?
</code></pre></div>
<p>Expected:</p>
<div class="highlight"><pre><span></span><code>expect_equal(t$fishID[1], first_fish_id)
</code></pre></div>
<p>The expected answer is 181.</p>
<h4 id="d122-explain-origin">D1.2.2: Explain ‘origin’<a class="headerlink" href="#d122-explain-origin" title="Anchor link to this section for reference">&para;</a></h4>
<p>Ask the AI:</p>
<div class="highlight"><pre><span></span><code>The &#39;origin&#39; column denotes the location where each fish comes from.
What is the location the first fish came from?
</code></pre></div>
<p>Expected:</p>
<div class="highlight"><pre><span></span><code>expect_equal(first_origin, t$origin[1])
</code></pre></div>
<p>The correct answers is Lake.</p>
<h4 id="d123-explain-transplant-values">D1.2.3: Explain ‘transplant’ values<a class="headerlink" href="#d123-explain-transplant-values" title="Anchor link to this section for reference">&para;</a></h4>
<p>Ask the AI:</p>
<div class="highlight"><pre><span></span><code>The &#39;transplant&#39; column denotes the location where each fish is
transplanted to.
A value of &#39;Stream&#39; denotes that the fish is part of the experiment
and is translated to a stream.
A value of &#39;Lake&#39; denotes that the fish is part of the experiment
and is translated to a lake.
A value of &#39;Control&#39; denotes that this fish was not part of the experiment
and was part of the control group instead.
What is the locations the first fish is transplanted to?
</code></pre></div>
<p>Expected:</p>
<div class="highlight"><pre><span></span><code>expect_equal(t$transplant[1], first_transplant)
</code></pre></div>
<p>The correct answers is Lake.</p>
<h4 id="d124-explain-pre_mass">D1.2.4: Explain ‘pre_mass’<a class="headerlink" href="#d124-explain-pre_mass" title="Anchor link to this section for reference">&para;</a></h4>
<p>Ask the AI:</p>
<div class="highlight"><pre><span></span><code>The `pre_mass` column denotes the mass of a fish
before the transplantation.
A value of &#39;NA&#39; denotes that the fish has not been weighted
before transplantation.

About the first fish: has it been weighted before transplantation?
If yes, what is its mass before transplantation?
</code></pre></div>
<p>Expected:</p>
<div class="highlight"><pre><span></span><code>expect_equal(t$pre_mass[1], first_pre_mass)
</code></pre></div>
<p>The correct answer is 0.5 to 3.6.</p>
<h4 id="d125-explain-survived">D1.2.5: Explain ‘survived’<a class="headerlink" href="#d125-explain-survived" title="Anchor link to this section for reference">&para;</a></h4>
<p>Ask the AI:</p>
<div class="highlight"><pre><span></span><code>The `survived` column denotes if the fish survived the experiment.
A value of 0 means that the fish died in the experiment.
A value of 1 means that the fish survived the experiment.
A value of NA means that the fish was irrevant to the experiment.
</code></pre></div>
<p>Expected:</p>
<div class="highlight"><pre><span></span><code>expect_equal(t$survived[1], first_fish_survived)
</code></pre></div>
<p>The correct answers is 0.</p>
<h4 id="d126-explain-enclosure">D1.2.6: Explain ‘enclosure’<a class="headerlink" href="#d126-explain-enclosure" title="Anchor link to this section for reference">&para;</a></h4>
<p>Ask the AI:</p>
<div class="highlight"><pre><span></span><code>The `enclosure` column denotes the ID of an enclosure.
Each enclose has a unique ID.
What is the ID of the first enclosure?
</code></pre></div>
<p>Expected:</p>
<div class="highlight"><pre><span></span><code>expect_equal(t$enclosure[1], first_enclosure_id)
</code></pre></div>
<p>The correct answer is L1.</p>
<h3 id="d13-reasoning">D1.3: Reasoning<a class="headerlink" href="#d13-reasoning" title="Anchor link to this section for reference">&para;</a></h3>
<p>In these steps, we let the AI reason about the data, such as producing a
tally.</p>
<h4 id="d131-reason-about-the-fishid-values">D1.3.1: Reason about the ‘fishID’ values<a class="headerlink" href="#d131-reason-about-the-fishid-values" title="Anchor link to this section for reference">&para;</a></h4>
<p>Ask the AI:</p>
<div class="highlight"><pre><span></span><code>How many different fish are in this dataset?
</code></pre></div>
<p>Expected:</p>
<div class="highlight"><pre><span></span><code>expect_equal(total_n_fish, length(unique(t$fishID)))
</code></pre></div>
<p>The expected answer is 300.</p>
<h4 id="d132-reason-about-the-origin-values">D1.3.2: Reason about the ‘origin’ values<a class="headerlink" href="#d132-reason-about-the-origin-values" title="Anchor link to this section for reference">&para;</a></h4>
<p>Ask the AI:</p>
<div class="highlight"><pre><span></span><code>What are the locations the fish come from?
</code></pre></div>
<p>Expected:</p>
<div class="highlight"><pre><span></span><code>expect_equal(unique(t$origin), origin_values)
</code></pre></div>
<p>The correct answers is Lake, Stream.</p>
<h4 id="d133-reason-about-transplant-count-the-fish-in-experiment">D1.3.3: Reason about ‘transplant’: count the fish in experiment<a class="headerlink" href="#d133-reason-about-transplant-count-the-fish-in-experiment" title="Anchor link to this section for reference">&para;</a></h4>
<p>Ask the AI:</p>
<div class="highlight"><pre><span></span><code>How many fish are part of the experiment?
</code></pre></div>
<p>Expected:</p>
<div class="highlight"><pre><span></span><code>t_1 &lt;- t |&gt; dplyr::filter(transplant != &quot;Control&quot;) 
expect_equal(n_fish_transplanted, length(unique(t_1$fishID)))
</code></pre></div>
<p>The correct answer is 240.</p>
<h4 id="d134-reason-about-the-pre_mass-values">D1.3.4: Reason about the ‘pre_mass’ values<a class="headerlink" href="#d134-reason-about-the-pre_mass-values" title="Anchor link to this section for reference">&para;</a></h4>
<p>Ask the AI:</p>
<div class="highlight"><pre><span></span><code>What is lowest fish mass before transplantation?
What is heighest fish mass before transplantation?
</code></pre></div>
<p>Expected:</p>
<div class="highlight"><pre><span></span><code>expect_equal(lowest_pre_mass, min(t_1$pre_mass))
expect_equal(highest_pre_mass, max(t_1$pre_mass))
</code></pre></div>
<p>The correct answer is 0.5 to 3.6.</p>
<h4 id="d135-reason-with-survived-count-the-survivors">D1.3.5: Reason with ‘survived’: count the survivors<a class="headerlink" href="#d135-reason-with-survived-count-the-survivors" title="Anchor link to this section for reference">&para;</a></h4>
<p>Ask the AI:</p>
<div class="highlight"><pre><span></span><code>How many fish died?
How many fish survived?
How many fish were not part of the experiment?
</code></pre></div>
<p>Expected:</p>
<div class="highlight"><pre><span></span><code>expect_equal(n_all_survived, sum(is_true(t$survived)))
expect_equal(n_all_died, sum(is_false(t$survived)))
expect_equal(n_all_ignored, sum(is.na(t$survived)))
</code></pre></div>
<p>The correct answers are:</p>
<ul>
<li>89 fish died</li>
<li>151 fish survived</li>
<li>60 fish were not part of the experiment?</li>
</ul>
<h4 id="d1361-reason-about-the-enclosure-values-count-the-nub">D1.3.6.1: Reason about the ‘enclosure’ values: count the nub<a class="headerlink" href="#d1361-reason-about-the-enclosure-values-count-the-nub" title="Anchor link to this section for reference">&para;</a></h4>
<p>Ask the AI:</p>
<div class="highlight"><pre><span></span><code>How many enclosures are used in the experiment?
</code></pre></div>
<p>Expected:</p>
<div class="highlight"><pre><span></span><code>expect_equal(n_enclosures, length(unique(t_1$enclosure)))
</code></pre></div>
<p>The correct answer is 80 enclosures.</p>
<h4 id="d1362-reasom-about-enclosure-tally-the-number-of-fish">D1.3.6.2: Reasom about ‘enclosure’: tally the number of fish<a class="headerlink" href="#d1362-reasom-about-enclosure-tally-the-number-of-fish" title="Anchor link to this section for reference">&para;</a></h4>
<p>Ask the AI:</p>
<div class="highlight"><pre><span></span><code>How many fish, that are part of the experiment, are in each enclosure?
</code></pre></div>
<p>Expected:</p>
<div class="highlight"><pre><span></span><code>t_1 &lt;- t |&gt; dplyr::filter(transplant != &quot;Control&quot;) 
n_fish_per_enclosure &lt;- dplyr::count(t_1, enclosure)
expect_equal(n_enclosures_with_2_fish, sum(n_fish_per_enclosure$n == 2))
expect_equal(n_enclosures_with_3_fish, sum(n_fish_per_enclosure$n == 3))
expect_equal(n_enclosures_with_4_fish, sum(n_fish_per_enclosure$n == 4))
knitr::kable(head(n_fish_per_enclosure))
</code></pre></div>
<table>
<thead>
<tr class="header">
<th style="text-align: left;">enclosure</th>
<th style="text-align: right;">n</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">L1</td>
<td style="text-align: right;">3</td>
</tr>
<tr class="even">
<td style="text-align: left;">L10</td>
<td style="text-align: right;">3</td>
</tr>
<tr class="odd">
<td style="text-align: left;">L11</td>
<td style="text-align: right;">3</td>
</tr>
<tr class="even">
<td style="text-align: left;">L12</td>
<td style="text-align: right;">3</td>
</tr>
<tr class="odd">
<td style="text-align: left;">L13</td>
<td style="text-align: right;">3</td>
</tr>
<tr class="even">
<td style="text-align: left;">L14</td>
<td style="text-align: right;">3</td>
</tr>
</tbody>
</table>

<p>The correct answer is:</p>
<ul>
<li>3 enclosures have 2 fish</li>
<li>74 enclosures have 3 fish</li>
<li>3 enclosures have 4 fish</li>
</ul>
<p>As a note to self, these are the anomalies:</p>
<div class="highlight"><pre><span></span><code>expect_equal(anomalous_enclosures, n_fish_per_enclosure[n_fish_per_enclosure$n != 3, ]$enclosure)
knitr::kable(n_fish_per_enclosure[n_fish_per_enclosure$n != 3, ])
</code></pre></div>
<table>
<thead>
<tr class="header">
<th style="text-align: left;"></th>
<th style="text-align: left;">enclosure</th>
<th style="text-align: right;">n</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">13</td>
<td style="text-align: left;">L20</td>
<td style="text-align: right;">4</td>
</tr>
<tr class="even">
<td style="text-align: left;">18</td>
<td style="text-align: left;">L25</td>
<td style="text-align: right;">2</td>
</tr>
<tr class="odd">
<td style="text-align: left;">37</td>
<td style="text-align: left;">L6</td>
<td style="text-align: right;">2</td>
</tr>
<tr class="even">
<td style="text-align: left;">38</td>
<td style="text-align: left;">L7</td>
<td style="text-align: right;">4</td>
</tr>
<tr class="odd">
<td style="text-align: left;">55</td>
<td style="text-align: left;">S22</td>
<td style="text-align: right;">4</td>
</tr>
<tr class="even">
<td style="text-align: left;">57</td>
<td style="text-align: left;">S24</td>
<td style="text-align: right;">2</td>
</tr>
</tbody>
</table>

<h3 id="d14-analysis">D1.4: Analysis<a class="headerlink" href="#d14-analysis" title="Anchor link to this section for reference">&para;</a></h3>
<p>In these steps, we work with the data, in the same way as the paper did.</p>
<h4 id="d141-calculate-cage_mass_mean">D1.4.1: calculate ‘cage_mass_mean’<a class="headerlink" href="#d141-calculate-cage_mass_mean" title="Anchor link to this section for reference">&para;</a></h4>
<p>Ask the AI:</p>
<div class="highlight"><pre><span></span><code>To make a better comparison, we are going to standarize
body masses per enclosure.
Add a column to the
data called `cage_mass_mean` which holds the average
`pre_mass` within the enclosure each fish is in.
Could you show me the data for enclosure L1?
</code></pre></div>
<p>Expected:</p>
<div class="highlight"><pre><span></span><code>cage_mass_mean_per_enclosure &lt;- t_1 |&gt; 
  dplyr::select(enclosure, pre_mass) |&gt;
  dplyr::group_by(enclosure) |&gt;
  dplyr::summarise(cage_mass_mean = mean(pre_mass))
t_2 &lt;- merge(t_1, cage_mass_mean_per_enclosure)
knitr::kable(head(t_2))
</code></pre></div>
<table style="width:100%;">
<colgroup>
<col style="width: 14%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 13%" />
<col style="width: 16%" />
<col style="width: 13%" />
<col style="width: 22%" />
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">enclosure</th>
<th style="text-align: right;">fishID</th>
<th style="text-align: left;">origin</th>
<th style="text-align: right;">pre_mass</th>
<th style="text-align: left;">transplant</th>
<th style="text-align: right;">survived</th>
<th style="text-align: right;">cage_mass_mean</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">L1</td>
<td style="text-align: right;">181</td>
<td style="text-align: left;">Lake</td>
<td style="text-align: right;">1.00</td>
<td style="text-align: left;">Lake</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1.256667</td>
</tr>
<tr class="even">
<td style="text-align: left;">L1</td>
<td style="text-align: right;">182</td>
<td style="text-align: left;">Lake</td>
<td style="text-align: right;">0.99</td>
<td style="text-align: left;">Lake</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1.256667</td>
</tr>
<tr class="odd">
<td style="text-align: left;">L1</td>
<td style="text-align: right;">1</td>
<td style="text-align: left;">Stream</td>
<td style="text-align: right;">1.78</td>
<td style="text-align: left;">Lake</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">1.256667</td>
</tr>
<tr class="even">
<td style="text-align: left;">L10</td>
<td style="text-align: right;">16</td>
<td style="text-align: left;">Stream</td>
<td style="text-align: right;">1.22</td>
<td style="text-align: left;">Lake</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1.663333</td>
</tr>
<tr class="odd">
<td style="text-align: left;">L10</td>
<td style="text-align: right;">193</td>
<td style="text-align: left;">Lake</td>
<td style="text-align: right;">1.71</td>
<td style="text-align: left;">Lake</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1.663333</td>
</tr>
<tr class="even">
<td style="text-align: left;">L10</td>
<td style="text-align: right;">17</td>
<td style="text-align: left;">Stream</td>
<td style="text-align: right;">2.06</td>
<td style="text-align: left;">Lake</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">1.663333</td>
</tr>
</tbody>
</table>

<div class="highlight"><pre><span></span><code>knitr::kable(t_2[t_2$enclosure == &quot;L1&quot;, ])
</code></pre></div>
<table style="width:100%;">
<colgroup>
<col style="width: 14%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 13%" />
<col style="width: 16%" />
<col style="width: 13%" />
<col style="width: 22%" />
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">enclosure</th>
<th style="text-align: right;">fishID</th>
<th style="text-align: left;">origin</th>
<th style="text-align: right;">pre_mass</th>
<th style="text-align: left;">transplant</th>
<th style="text-align: right;">survived</th>
<th style="text-align: right;">cage_mass_mean</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">L1</td>
<td style="text-align: right;">181</td>
<td style="text-align: left;">Lake</td>
<td style="text-align: right;">1.00</td>
<td style="text-align: left;">Lake</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1.256667</td>
</tr>
<tr class="even">
<td style="text-align: left;">L1</td>
<td style="text-align: right;">182</td>
<td style="text-align: left;">Lake</td>
<td style="text-align: right;">0.99</td>
<td style="text-align: left;">Lake</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1.256667</td>
</tr>
<tr class="odd">
<td style="text-align: left;">L1</td>
<td style="text-align: right;">1</td>
<td style="text-align: left;">Stream</td>
<td style="text-align: right;">1.78</td>
<td style="text-align: left;">Lake</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">1.256667</td>
</tr>
</tbody>
</table>

<div class="highlight"><pre><span></span><code>expect_equal(
  t_2[t_2$enclosure == &quot;L1&quot;, ]$cage_mass_mean,
  rep(cage_mass_mean_for_l1, 3),
  tolerance = 1.0e-6
)
</code></pre></div>
<p>For enclose L1, the expected <code>cage_mass_mean</code> for each of the fish is
1.256667.</p>
<h4 id="d142-calculate-cage_mass_stdev">D1.4.2: calculate ‘cage_mass_stdev’<a class="headerlink" href="#d142-calculate-cage_mass_stdev" title="Anchor link to this section for reference">&para;</a></h4>
<p>Ask the AI:</p>
<div class="highlight"><pre><span></span><code>To make a better comparison, we are going to standarize
body masses per enclosure. Add a column to the
data called `cage_mass_stdev` which is the standard
deviation of the `pre_mass` distribution of each enclosure
each fish is in.
Could you show me the data for enclosure L1?
</code></pre></div>
<p>Expected:</p>
<div class="highlight"><pre><span></span><code>cage_mass_stdev_per_enclosure &lt;- t_2 |&gt; 
  dplyr::select(enclosure, pre_mass) |&gt;
  dplyr::group_by(enclosure) |&gt;
  dplyr::summarise(cage_mass_stdev = sd(pre_mass))
t_3 &lt;- merge(t_2, cage_mass_stdev_per_enclosure)
knitr::kable(head(t_3))
</code></pre></div>
<table>
<colgroup>
<col style="width: 11%" />
<col style="width: 8%" />
<col style="width: 8%" />
<col style="width: 10%" />
<col style="width: 13%" />
<col style="width: 10%" />
<col style="width: 17%" />
<col style="width: 19%" />
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">enclosure</th>
<th style="text-align: right;">fishID</th>
<th style="text-align: left;">origin</th>
<th style="text-align: right;">pre_mass</th>
<th style="text-align: left;">transplant</th>
<th style="text-align: right;">survived</th>
<th style="text-align: right;">cage_mass_mean</th>
<th style="text-align: right;">cage_mass_stdev</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">L1</td>
<td style="text-align: right;">181</td>
<td style="text-align: left;">Lake</td>
<td style="text-align: right;">1.00</td>
<td style="text-align: left;">Lake</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1.256667</td>
<td style="text-align: right;">0.4532475</td>
</tr>
<tr class="even">
<td style="text-align: left;">L1</td>
<td style="text-align: right;">182</td>
<td style="text-align: left;">Lake</td>
<td style="text-align: right;">0.99</td>
<td style="text-align: left;">Lake</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1.256667</td>
<td style="text-align: right;">0.4532475</td>
</tr>
<tr class="odd">
<td style="text-align: left;">L1</td>
<td style="text-align: right;">1</td>
<td style="text-align: left;">Stream</td>
<td style="text-align: right;">1.78</td>
<td style="text-align: left;">Lake</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">1.256667</td>
<td style="text-align: right;">0.4532475</td>
</tr>
<tr class="even">
<td style="text-align: left;">L10</td>
<td style="text-align: right;">16</td>
<td style="text-align: left;">Stream</td>
<td style="text-align: right;">1.22</td>
<td style="text-align: left;">Lake</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1.663333</td>
<td style="text-align: right;">0.4219400</td>
</tr>
<tr class="odd">
<td style="text-align: left;">L10</td>
<td style="text-align: right;">193</td>
<td style="text-align: left;">Lake</td>
<td style="text-align: right;">1.71</td>
<td style="text-align: left;">Lake</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1.663333</td>
<td style="text-align: right;">0.4219400</td>
</tr>
<tr class="even">
<td style="text-align: left;">L10</td>
<td style="text-align: right;">17</td>
<td style="text-align: left;">Stream</td>
<td style="text-align: right;">2.06</td>
<td style="text-align: left;">Lake</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">1.663333</td>
<td style="text-align: right;">0.4219400</td>
</tr>
</tbody>
</table>

<div class="highlight"><pre><span></span><code>knitr::kable(t_3[t_3$enclosure == &quot;L1&quot;, ])
</code></pre></div>
<table>
<colgroup>
<col style="width: 11%" />
<col style="width: 8%" />
<col style="width: 8%" />
<col style="width: 10%" />
<col style="width: 13%" />
<col style="width: 10%" />
<col style="width: 17%" />
<col style="width: 19%" />
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">enclosure</th>
<th style="text-align: right;">fishID</th>
<th style="text-align: left;">origin</th>
<th style="text-align: right;">pre_mass</th>
<th style="text-align: left;">transplant</th>
<th style="text-align: right;">survived</th>
<th style="text-align: right;">cage_mass_mean</th>
<th style="text-align: right;">cage_mass_stdev</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">L1</td>
<td style="text-align: right;">181</td>
<td style="text-align: left;">Lake</td>
<td style="text-align: right;">1.00</td>
<td style="text-align: left;">Lake</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1.256667</td>
<td style="text-align: right;">0.4532475</td>
</tr>
<tr class="even">
<td style="text-align: left;">L1</td>
<td style="text-align: right;">182</td>
<td style="text-align: left;">Lake</td>
<td style="text-align: right;">0.99</td>
<td style="text-align: left;">Lake</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1.256667</td>
<td style="text-align: right;">0.4532475</td>
</tr>
<tr class="odd">
<td style="text-align: left;">L1</td>
<td style="text-align: right;">1</td>
<td style="text-align: left;">Stream</td>
<td style="text-align: right;">1.78</td>
<td style="text-align: left;">Lake</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">1.256667</td>
<td style="text-align: right;">0.4532475</td>
</tr>
</tbody>
</table>

<div class="highlight"><pre><span></span><code>expect_equal(
  t_3[t_3$enclosure == &quot;L1&quot;, ]$cage_mass_stdev,
  rep(cage_mass_stdev_for_l1, 3),
  tolerance = 1.0e-6
)
</code></pre></div>
<h4 id="d143-calculate-cage_mass_mean_deviation_sd">D1.4.3: calculate ‘cage_mass_mean_deviation_sd’<a class="headerlink" href="#d143-calculate-cage_mass_mean_deviation_sd" title="Anchor link to this section for reference">&para;</a></h4>
<p>Ask the AI:</p>
<div class="highlight"><pre><span></span><code>To make a better comparison, we are going to standarize
body masses per enclosure. Add a column to the
data called `cage_mass_mean_deviation_sd`.
Its values are calculated per fish.
Each fish its `cage_mass_mean_deviation_sd`
equals the absolute difference between its `pre_mass`
and its enclosure&#39;s `cage_mass_mean`, 
divided by the `cage_mass_stdev` of its enclosure.
Could you show me the data for enclosure L1?
</code></pre></div>
<p>Expected:</p>
<div class="highlight"><pre><span></span><code>cage_mass_mean_deviation_sd_per_fish &lt;- t_3 |&gt; 
  dplyr::select(fishID, pre_mass, cage_mass_mean, cage_mass_stdev) |&gt;
  dplyr::group_by(fishID) |&gt;
  dplyr::mutate(
    cage_mass_mean_deviation_sd = 
      abs(pre_mass - cage_mass_mean) / cage_mass_stdev
  ) |&gt;
  dplyr::select(fishID, cage_mass_mean_deviation_sd)
expect_equal(
  nrow(cage_mass_mean_deviation_sd_per_fish),
  n_fish_transplanted
)

expect_equal(
  nrow(t_3),
  n_fish_transplanted
)
t_4 &lt;- merge(t_3, cage_mass_mean_deviation_sd_per_fish)
expect_equal(
  nrow(t_4),
  n_fish_transplanted
)

knitr::kable(head(t_4))
</code></pre></div>
<table>
<colgroup>
<col style="width: 6%" />
<col style="width: 8%" />
<col style="width: 6%" />
<col style="width: 8%" />
<col style="width: 9%" />
<col style="width: 8%" />
<col style="width: 13%" />
<col style="width: 14%" />
<col style="width: 25%" />
</colgroup>
<thead>
<tr class="header">
<th style="text-align: right;">fishID</th>
<th style="text-align: left;">enclosure</th>
<th style="text-align: left;">origin</th>
<th style="text-align: right;">pre_mass</th>
<th style="text-align: left;">transplant</th>
<th style="text-align: right;">survived</th>
<th style="text-align: right;">cage_mass_mean</th>
<th style="text-align: right;">cage_mass_stdev</th>
<th style="text-align: right;">cage_mass_mean_deviation_sd</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">1</td>
<td style="text-align: left;">L1</td>
<td style="text-align: left;">Stream</td>
<td style="text-align: right;">1.78</td>
<td style="text-align: left;">Lake</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">1.256667</td>
<td style="text-align: right;">0.4532475</td>
<td style="text-align: right;">1.1546303</td>
</tr>
<tr class="even">
<td style="text-align: right;">2</td>
<td style="text-align: left;">L2</td>
<td style="text-align: left;">Stream</td>
<td style="text-align: right;">0.65</td>
<td style="text-align: left;">Lake</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">1.016667</td>
<td style="text-align: right;">0.5589574</td>
<td style="text-align: right;">0.6559832</td>
</tr>
<tr class="odd">
<td style="text-align: right;">3</td>
<td style="text-align: left;">L2</td>
<td style="text-align: left;">Stream</td>
<td style="text-align: right;">1.66</td>
<td style="text-align: left;">Lake</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">1.016667</td>
<td style="text-align: right;">0.5589574</td>
<td style="text-align: right;">1.1509524</td>
</tr>
<tr class="even">
<td style="text-align: right;">4</td>
<td style="text-align: left;">L3</td>
<td style="text-align: left;">Stream</td>
<td style="text-align: right;">2.26</td>
<td style="text-align: left;">Lake</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">1.453333</td>
<td style="text-align: right;">0.8309834</td>
<td style="text-align: right;">0.9707375</td>
</tr>
<tr class="odd">
<td style="text-align: right;">5</td>
<td style="text-align: left;">L3</td>
<td style="text-align: left;">Stream</td>
<td style="text-align: right;">1.50</td>
<td style="text-align: left;">Lake</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1.453333</td>
<td style="text-align: right;">0.8309834</td>
<td style="text-align: right;">0.0561584</td>
</tr>
<tr class="even">
<td style="text-align: right;">6</td>
<td style="text-align: left;">L4</td>
<td style="text-align: left;">Stream</td>
<td style="text-align: right;">1.89</td>
<td style="text-align: left;">Lake</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">1.723333</td>
<td style="text-align: right;">0.9016282</td>
<td style="text-align: right;">0.1848508</td>
</tr>
</tbody>
</table>

<div class="highlight"><pre><span></span><code>knitr::kable(t_4[t_4$enclosure == &quot;L1&quot;, ])
</code></pre></div>
<table>
<colgroup>
<col style="width: 3%" />
<col style="width: 6%" />
<col style="width: 8%" />
<col style="width: 6%" />
<col style="width: 7%" />
<col style="width: 9%" />
<col style="width: 7%" />
<col style="width: 12%" />
<col style="width: 13%" />
<col style="width: 24%" />
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;"></th>
<th style="text-align: right;">fishID</th>
<th style="text-align: left;">enclosure</th>
<th style="text-align: left;">origin</th>
<th style="text-align: right;">pre_mass</th>
<th style="text-align: left;">transplant</th>
<th style="text-align: right;">survived</th>
<th style="text-align: right;">cage_mass_mean</th>
<th style="text-align: right;">cage_mass_stdev</th>
<th style="text-align: right;">cage_mass_mean_deviation_sd</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">1</td>
<td style="text-align: right;">1</td>
<td style="text-align: left;">L1</td>
<td style="text-align: left;">Stream</td>
<td style="text-align: right;">1.78</td>
<td style="text-align: left;">Lake</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">1.256667</td>
<td style="text-align: right;">0.4532475</td>
<td style="text-align: right;">1.1546303</td>
</tr>
<tr class="even">
<td style="text-align: left;">181</td>
<td style="text-align: right;">181</td>
<td style="text-align: left;">L1</td>
<td style="text-align: left;">Lake</td>
<td style="text-align: right;">1.00</td>
<td style="text-align: left;">Lake</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1.256667</td>
<td style="text-align: right;">0.4532475</td>
<td style="text-align: right;">0.5662836</td>
</tr>
<tr class="odd">
<td style="text-align: left;">182</td>
<td style="text-align: right;">182</td>
<td style="text-align: left;">L1</td>
<td style="text-align: left;">Lake</td>
<td style="text-align: right;">0.99</td>
<td style="text-align: left;">Lake</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1.256667</td>
<td style="text-align: right;">0.4532475</td>
<td style="text-align: right;">0.5883466</td>
</tr>
</tbody>
</table>

<div class="highlight"><pre><span></span><code>expect_equal(
  t_4[t_4$enclosure == &quot;L1&quot;, ]$cage_mass_mean_deviation_sd,
  abs_cage_mass_mean_deviation_sd_for_l1,
  tolerance = 1.0e-6
)
</code></pre></div>
<p>The values of <code>cage_mass_mean_deviation_sd</code> for enclosure <code>L1</code> are
expected to be 1.1546303, 0.5662836, 0.5883466.</p>
<h3 id="d15-evaluation">D1.5: Evaluation<a class="headerlink" href="#d15-evaluation" title="Anchor link to this section for reference">&para;</a></h3>
<p>The AI has been evaluated each step along the way. Regardless of this,
here we evaluate the learning of the AI again, in a more visual way: it
should reproduce a figure in the paper.</p>
<h4 id="d151-reproduce-the-plot">D1.5.1: reproduce the plot<a class="headerlink" href="#d151-reproduce-the-plot" title="Anchor link to this section for reference">&para;</a></h4>
<p>Ask the AI:</p>
<div class="highlight"><pre><span></span><code>Create a scatter plot of this data:
- Each point is a fish. 
- Use a blue color for fish
  that have &#39;Lake&#39; as their origin.
- Use a green color for fish
  that have &#39;Stream&#39; as their origin.
- On the X axis, put the values of `cage_mass_mean_deviation_sd`
  of each fish
- On the Y axis, put the `survived` of each fish.
- Put the fish in four categories:
  - Fish that have an `origin` of &#39;Lake&#39; and
    a `transplant` of &#39;Lake&#39; are in category &#39;LL&#39;
  - Fish that have an `origin` of &#39;Lake&#39; and
    a `transplant` of &#39;Stream&#39; are in category &#39;LS&#39;
  - Fish that have an `origin` of &#39;Stream&#39; and
    a `transplant` of &#39;Lake&#39; are in category &#39;SL&#39;
  - Fish that have an `origin` of &#39;Stream&#39; and
    a `transplant` of &#39;Stream&#39; are in category &#39;SS&#39;
- Show a trendline for each binomal fit on each of these 4 categories.
  - Use blue lines for categories that originate from a lake
  - Use green lines for categories that originate from a stream
  - Use solid lines for categories &#39;LL&#39; and &#39;SS&#39;
  - Use dashed lines for categories &#39;LS&#39; and &#39;SL&#39;
</code></pre></div>
<p>Expected is the plot in the paper:</p>
<div class="highlight"><pre><span></span><code>t_4$origin_transplant &lt;- paste0(
  stringr::str_sub(t_4$origin,1 ,1),
  stringr::str_sub(t_4$transplant,1 ,1)
)
ggplot2::ggplot(
  data = t_4,
  ggplot2::aes(
    x = cage_mass_mean_deviation_sd,
    y = survived,
    color = origin_transplant,
    lty = origin_transplant
  )
) + ggplot2::scale_color_manual(
    values = c(&quot;blue&quot;, &quot;blue&quot;, &quot;green&quot;, &quot;green&quot;)
  ) + 
  ggplot2::scale_linetype_manual(
    values = c(&quot;solid&quot;, &quot;dashed&quot;, &quot;dashed&quot;, &quot;solid&quot;)
  ) +
  ggplot2::geom_point() +
  ggplot2::geom_smooth(
    method = &quot;glm&quot;,
    method.args = list(family = &quot;binomial&quot;),
    se = FALSE
  )
#&gt; `geom_smooth()` using formula = &#39;y ~ x&#39;
</code></pre></div>
<p><img alt="" src="../dialogue_files/figure-markdown_strict/unnamed-chunk-26-1.png" /></p>
<h3 id="d16-synthesis">D1.6: Synthesis<a class="headerlink" href="#d16-synthesis" title="Anchor link to this section for reference">&para;</a></h3>
<p>In these steps, we are combining the current knowledge with the paper.</p>
<p>Tell the AI:</p>
<div class="highlight"><pre><span></span><code>The data you&#39;ve been working on was used in a scientific paper.
The analyis you&#39;ve done so far was used in the same scientific paper.
Below this paragraph is the abstract of that scientific paper.
Read it.

Two distinct forms of natural selection promote adaptive biological
diversity. Divergent selection occurs when different environments
favour different phenotypes, leading to increased differences
between populations. Negative frequency-dependent selection
occurs when rare variants within a population are favoured over
common ones, increasing diversity within populations. These
two diversifying forces promote genetic variation at different
spatial scales, and may act in opposition, but their relative effects
remain unclear because they are rarely measured concurrently.
Here we show that negative frequency-dependent selection within
populations can favor rare immigrants over locally adapted
residents. We reciprocally transplanted lake and stream ecotypes
of threespine stickleback into lake and stream habitats, while
manipulating the relative abundance of residents versus immigrants.
We found negative frequency-dependence: survival was highest
for the locally rare ecotype, rather than natives. Also, individuals
with locally rare major histocompatibility complex (MHC) class
IIb genotypes were infected by fewer parasites. This negative
frequency-dependent selection will tend to favour rare immigrants
over common residents, amplifying the effect of migration and
undermining the efficacy of divergent natural selection to drive
population differences. The only signal of divergent selection
was a tendency for foreign fish to have higher parasite loads than
residents, after controlling for MHC genotype rarity. Frequency-
dependent ecological interactions have long been thought to
promote speciation. Our results suggest a more nuanced view in
which negative frequency dependence alters the fate of migrants to
promote or constrain evolutionary divergence between populations.
</code></pre></div>
<h3 id="d17-reflection">D1.7: Reflection<a class="headerlink" href="#d17-reflection" title="Anchor link to this section for reference">&para;</a></h3>
<p>Not applicable. A trained AI does not need to reflect on its learning.</p>
<h2 id="d2-q1-ask-if-the-conclusion-is-correct">D2. <strong>Q1</strong>: Ask if the conclusion is correct<a class="headerlink" href="#d2-q1-ask-if-the-conclusion-is-correct" title="Anchor link to this section for reference">&para;</a></h2>
<p>Ask the AI:</p>
<div class="highlight"><pre><span></span><code>The scientific paper describes a conclusion drawn from the data.
The conclusion is that the extreme body masses
are likelier to survive.
Do you judge this to be a valid conclusion based on the data?
</code></pre></div>
<h2 id="d3-alternative-line-of-reasoning">D3 Alternative line of reasoning<a class="headerlink" href="#d3-alternative-line-of-reasoning" title="Anchor link to this section for reference">&para;</a></h2>
<h3 id="d31-analysis">D3.1 Analysis<a class="headerlink" href="#d31-analysis" title="Anchor link to this section for reference">&para;</a></h3>
<h4 id="d311-add-relative-standarized-body-mass">D3.1.1 Add relative standarized body mass<a class="headerlink" href="#d311-add-relative-standarized-body-mass" title="Anchor link to this section for reference">&para;</a></h4>
<p>Ask the AI:</p>
<div class="highlight"><pre><span></span><code>To make a better comparison, we are going to standarize
body masses per enclosure. Add a column to the
data called `cage_mass_mean_deviation_sd_rel`.
Its values are calculated per fish.
Each fish its `cage_mass_mean_deviation_sd_rel`
equals the difference between its `pre_mass`
and its enclosure&#39;s `cage_mass_mean`, 
divided by the `cage_mass_stdev` of its enclosure.
Could you show me the data for enclosure L1?
</code></pre></div>
<p>Expected:</p>
<div class="highlight"><pre><span></span><code>cage_mass_mean_deviation_sd_per_fish_rel &lt;- t_4 |&gt; 
  dplyr::select(fishID, pre_mass, cage_mass_mean, cage_mass_stdev) |&gt;
  dplyr::group_by(fishID) |&gt;
  dplyr::mutate(
    cage_mass_mean_deviation_sd_rel = 
      (pre_mass - cage_mass_mean) / cage_mass_stdev
  ) |&gt;
  dplyr::select(fishID, cage_mass_mean_deviation_sd_rel)
expect_equal(
  nrow(cage_mass_mean_deviation_sd_per_fish_rel),
  n_fish_transplanted
)

expect_equal(
  nrow(t_4),
  n_fish_transplanted
)
t_5 &lt;- merge(t_4, cage_mass_mean_deviation_sd_per_fish_rel)
expect_equal(
  nrow(t_5),
  n_fish_transplanted
)

knitr::kable(head(t_5))
</code></pre></div>
<table>
<colgroup>
<col style="width: 4%" />
<col style="width: 6%" />
<col style="width: 4%" />
<col style="width: 5%" />
<col style="width: 6%" />
<col style="width: 5%" />
<col style="width: 9%" />
<col style="width: 9%" />
<col style="width: 17%" />
<col style="width: 11%" />
<col style="width: 19%" />
</colgroup>
<thead>
<tr class="header">
<th style="text-align: right;">fishID</th>
<th style="text-align: left;">enclosure</th>
<th style="text-align: left;">origin</th>
<th style="text-align: right;">pre_mass</th>
<th style="text-align: left;">transplant</th>
<th style="text-align: right;">survived</th>
<th style="text-align: right;">cage_mass_mean</th>
<th style="text-align: right;">cage_mass_stdev</th>
<th style="text-align: right;">cage_mass_mean_deviation_sd</th>
<th style="text-align: left;">origin_transplant</th>
<th style="text-align: right;">cage_mass_mean_deviation_sd_rel</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">1</td>
<td style="text-align: left;">L1</td>
<td style="text-align: left;">Stream</td>
<td style="text-align: right;">1.78</td>
<td style="text-align: left;">Lake</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">1.256667</td>
<td style="text-align: right;">0.4532475</td>
<td style="text-align: right;">1.1546303</td>
<td style="text-align: left;">SL</td>
<td style="text-align: right;">1.1546303</td>
</tr>
<tr class="even">
<td style="text-align: right;">2</td>
<td style="text-align: left;">L2</td>
<td style="text-align: left;">Stream</td>
<td style="text-align: right;">0.65</td>
<td style="text-align: left;">Lake</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">1.016667</td>
<td style="text-align: right;">0.5589574</td>
<td style="text-align: right;">0.6559832</td>
<td style="text-align: left;">SL</td>
<td style="text-align: right;">-0.6559832</td>
</tr>
<tr class="odd">
<td style="text-align: right;">3</td>
<td style="text-align: left;">L2</td>
<td style="text-align: left;">Stream</td>
<td style="text-align: right;">1.66</td>
<td style="text-align: left;">Lake</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">1.016667</td>
<td style="text-align: right;">0.5589574</td>
<td style="text-align: right;">1.1509524</td>
<td style="text-align: left;">SL</td>
<td style="text-align: right;">1.1509524</td>
</tr>
<tr class="even">
<td style="text-align: right;">4</td>
<td style="text-align: left;">L3</td>
<td style="text-align: left;">Stream</td>
<td style="text-align: right;">2.26</td>
<td style="text-align: left;">Lake</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">1.453333</td>
<td style="text-align: right;">0.8309834</td>
<td style="text-align: right;">0.9707375</td>
<td style="text-align: left;">SL</td>
<td style="text-align: right;">0.9707375</td>
</tr>
<tr class="odd">
<td style="text-align: right;">5</td>
<td style="text-align: left;">L3</td>
<td style="text-align: left;">Stream</td>
<td style="text-align: right;">1.50</td>
<td style="text-align: left;">Lake</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1.453333</td>
<td style="text-align: right;">0.8309834</td>
<td style="text-align: right;">0.0561584</td>
<td style="text-align: left;">SL</td>
<td style="text-align: right;">0.0561584</td>
</tr>
<tr class="even">
<td style="text-align: right;">6</td>
<td style="text-align: left;">L4</td>
<td style="text-align: left;">Stream</td>
<td style="text-align: right;">1.89</td>
<td style="text-align: left;">Lake</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">1.723333</td>
<td style="text-align: right;">0.9016282</td>
<td style="text-align: right;">0.1848508</td>
<td style="text-align: left;">SL</td>
<td style="text-align: right;">0.1848508</td>
</tr>
</tbody>
</table>

<div class="highlight"><pre><span></span><code>knitr::kable(t_5[t_5$enclosure == &quot;L1&quot;, ])
</code></pre></div>
<table>
<colgroup>
<col style="width: 2%" />
<col style="width: 4%" />
<col style="width: 6%" />
<col style="width: 4%" />
<col style="width: 5%" />
<col style="width: 6%" />
<col style="width: 5%" />
<col style="width: 9%" />
<col style="width: 9%" />
<col style="width: 16%" />
<col style="width: 10%" />
<col style="width: 19%" />
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;"></th>
<th style="text-align: right;">fishID</th>
<th style="text-align: left;">enclosure</th>
<th style="text-align: left;">origin</th>
<th style="text-align: right;">pre_mass</th>
<th style="text-align: left;">transplant</th>
<th style="text-align: right;">survived</th>
<th style="text-align: right;">cage_mass_mean</th>
<th style="text-align: right;">cage_mass_stdev</th>
<th style="text-align: right;">cage_mass_mean_deviation_sd</th>
<th style="text-align: left;">origin_transplant</th>
<th style="text-align: right;">cage_mass_mean_deviation_sd_rel</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">1</td>
<td style="text-align: right;">1</td>
<td style="text-align: left;">L1</td>
<td style="text-align: left;">Stream</td>
<td style="text-align: right;">1.78</td>
<td style="text-align: left;">Lake</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">1.256667</td>
<td style="text-align: right;">0.4532475</td>
<td style="text-align: right;">1.1546303</td>
<td style="text-align: left;">SL</td>
<td style="text-align: right;">1.1546303</td>
</tr>
<tr class="even">
<td style="text-align: left;">181</td>
<td style="text-align: right;">181</td>
<td style="text-align: left;">L1</td>
<td style="text-align: left;">Lake</td>
<td style="text-align: right;">1.00</td>
<td style="text-align: left;">Lake</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1.256667</td>
<td style="text-align: right;">0.4532475</td>
<td style="text-align: right;">0.5662836</td>
<td style="text-align: left;">LL</td>
<td style="text-align: right;">-0.5662836</td>
</tr>
<tr class="odd">
<td style="text-align: left;">182</td>
<td style="text-align: right;">182</td>
<td style="text-align: left;">L1</td>
<td style="text-align: left;">Lake</td>
<td style="text-align: right;">0.99</td>
<td style="text-align: left;">Lake</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1.256667</td>
<td style="text-align: right;">0.4532475</td>
<td style="text-align: right;">0.5883466</td>
<td style="text-align: left;">LL</td>
<td style="text-align: right;">-0.5883466</td>
</tr>
</tbody>
</table>

<div class="highlight"><pre><span></span><code>expect_equal(
  t_5[t_5$enclosure == &quot;L1&quot;, ]$cage_mass_mean_deviation_sd_rel,
  cage_mass_mean_deviation_sd_for_l1,
  tolerance = 1.0e-6
)
</code></pre></div>
<h3 id="d32-evaluation">D3.2 Evaluation<a class="headerlink" href="#d32-evaluation" title="Anchor link to this section for reference">&para;</a></h3>
<h3 id="d321-plot-relative-standarized-body-mass-with-same-fit">D3.2.1 Plot relative standarized body mass with same fit<a class="headerlink" href="#d321-plot-relative-standarized-body-mass-with-same-fit" title="Anchor link to this section for reference">&para;</a></h3>
<p>Ask the AI:</p>
<div class="highlight"><pre><span></span><code>Create a scatter plot of this data:
- Each point is a fish. 
- Use a blue color for fish
  that have &#39;Lake&#39; as their origin.
- Use a green color for fish
  that have &#39;Stream&#39; as their origin.
- On the X axis, put the values of `cage_mass_mean_deviation_sd_rel`
  of each fish
- On the Y axis, put the `survived` of each fish.
- Put the fish in four categories:
  - Fish that have an `origin` of &#39;Lake&#39; and
     a `transplant` of &#39;Lake&#39; are in category &#39;LL&#39;
  - Fish that have an `origin` of &#39;Lake&#39; and
     a `transplant` of &#39;Stream&#39; are in category &#39;LS&#39;
  - Fish that have an `origin` of &#39;Stream&#39; and
     a `transplant` of &#39;Lake&#39; are in category &#39;SL&#39;
  - Fish that have an `origin` of &#39;Stream&#39; and
     a `transplant` of &#39;Stream&#39; are in category &#39;SS&#39;
- Show a trendline for each parabolic fit on each of these 4 categories.
   - Use blue lines for categories that originate from a lake
   - Use green lines for categories that originate from a stream
   - Use solid lines for categories &#39;LL&#39; and &#39;SS&#39;
   - Use dashed lines for categories &#39;LS&#39; and &#39;SL&#39;
</code></pre></div>
<p>This should produce this plot:</p>
<div class="highlight"><pre><span></span><code>ggplot2::ggplot(
  data = t_5,
  ggplot2::aes(
    x = cage_mass_mean_deviation_sd_rel,
    y = survived,
    color = origin_transplant,
    lty = origin_transplant
  )
) + ggplot2::scale_color_manual(
    values = c(&quot;blue&quot;, &quot;blue&quot;, &quot;green&quot;, &quot;green&quot;)
  ) + 
  ggplot2::scale_linetype_manual(
    values = c(&quot;solid&quot;, &quot;dashed&quot;, &quot;dashed&quot;, &quot;solid&quot;)
  ) +
  ggplot2::geom_point() +
  ggplot2::geom_smooth(
    method = &quot;lm&quot;, 
    formula = y ~ x + I(x^2),
    se = FALSE
  )
</code></pre></div>
<p><img alt="" src="../dialogue_files/figure-markdown_strict/unnamed-chunk-32-1.png" /></p>
<p>The differences are:</p>
<ul>
<li>this plot uses relative body masses, instead of absolute</li>
<li>the fit is parabolic, instead of binomial, as the latter is <a href="https://github.com/richelbilderbeek/paper_critical_ai/issues/15">assumed
    to be monotonically
    increasing/decreasing</a>.
    This means that a binomial distribution cannot be used to fit on
    data that is shaped like a <code>U</code> (as is assumed in the original paper:
    the extreme body masses have the highest fitness)</li>
</ul>
<h3 id="d33-synthesis">D3.3 Synthesis<a class="headerlink" href="#d33-synthesis" title="Anchor link to this section for reference">&para;</a></h3>
<p>In these steps, we are combining the current knowledge with the paper.</p>
<div class="highlight"><pre><span></span><code>We have just analysed the relative normalized body masses.
Call this the alternative analysis.
</code></pre></div>
<h3 id="d34-reflection">D3.4 Reflection<a class="headerlink" href="#d34-reflection" title="Anchor link to this section for reference">&para;</a></h3>
<p>Not applicable.</p>
<h2 id="d4-q2-ask-if-the-conclusion-is-correct">D4. <strong>Q2</strong>: Ask if the conclusion is correct<a class="headerlink" href="#d4-q2-ask-if-the-conclusion-is-correct" title="Anchor link to this section for reference">&para;</a></h2>
<p>Ask the AI:</p>
<div class="highlight"><pre><span></span><code>The scientific paper describes a conclusion drawn from the data.
The conclusion is that the extreme body masses
are likelier to survive.
Do you judge this to be a valid conclusion based on the data?

Take into account the insights from the alternative analysis.
</code></pre></div>












                
              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "../..", "features": ["toc.integrate", "navigation.tabs", "navigation.tabs.sticky", "navigation.sections", "navigation.path", "navigation.footer", "navigation.expand", "search.suggest", "content.code.annotate", "content.code.copy", "content.tabs.link", "content.action.edit", "content.action.view"], "search": "../../assets/javascripts/workers/search.973d3a69.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.92b07e13.min.js"></script>
      
    
  </body>
</html>